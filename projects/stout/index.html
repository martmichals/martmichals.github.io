<!DOCTYPE html>
<html>

  <head>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Martin  Michalski


  | stout case studies

</title>
<meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“ˆ</text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/projects/stout/">


<!-- Dark Mode -->
<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>



  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="https://martmichals.github.io/">
       <span class="font-weight-bold">Martin</span>   Michalski
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              About
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/resume-cv/" style="text-transform: capitalize;">
                Resume
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/" style="text-transform: capitalize;">
                projects
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/" style="text-transform: capitalize;">
                publications
                
              </a>
          </li>
          
          
          
          
            <div class="toggle-container">
              <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title" style="text-transform: capitalize;">stout case studies</h1>
    <p class="post-description">Case studies done for the interview process at Stout, a global investment bank and advisory firm.</p>
  </header>

  <article>
    <h2 id="case-study-1"><strong>Case Study 1</strong></h2>
<p>This study has the goal of predicting interest rates using data from Lending Club, 
a peer-to-peer lending platform.</p>

<h3 id="data-set">Data Set</h3>
<p>The dataset used is a subset of anonymized loan applications from Lending Club.
It can be found <a href="https://www.openintro.org/data/index.php?data=loans_full_schema" target="_blank" rel="noopener noreferrer">here</a>. The only issue dealt with in using this data was a small
number of missing values for some of the features.</p>

<h3 id="eda">EDA</h3>
<p>Below are visualizations which give insight into the dataset, giving clues as to which
approaches may be successful for our use case.</p>

<h4 id="geographic-loan-distribution">Geographic Loan Distribution</h4>

<p><img src="../../assets/img/stout/us_heatmap.png" alt="United States Loan Heatmap">
The number of loan applications per state looks to be roughly proportional to the 
state population. Thus, we remove <code class="language-plaintext highlighter-rouge">state</code> from consideration. Keeping it in 
the data would result in a large number of extra features after one-hot encoding, not 
useful in interest prediction.</p>

<h4 id="interest-rate-distribution">Interest Rate Distribution</h4>

<p><img src="../../assets/img/stout/interest_distribution.png" alt="Interest Rate Distribution">
Interest rate follows what looks to be a rough beta distribution. The graph looks
to be missing bars, which led to the observation that interest rate is, in fact, a 
categorical variable. This was confirmed <a href="https://www.lendingclub.com/investing/investor-education/interest-rates-and-fees" target="_blank" rel="noopener noreferrer">online</a>. This was also
confirmed by grouping <code class="language-plaintext highlighter-rouge">sub_grade</code> in the data, and displaying interest rates. Part 
of that table is shown below.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Sub-grade</th>
      <th style="text-align: center">Interest Rates</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">A1</td>
      <td style="text-align: center">[5.23, 5.31]</td>
    </tr>
    <tr>
      <td style="text-align: center">A2</td>
      <td style="text-align: center">[6.08, 6.07, 6.0]</td>
    </tr>
    <tr>
      <td style="text-align: center">A3</td>
      <td style="text-align: center">[6.72, 6.71]</td>
    </tr>
    <tr>
      <td style="text-align: center">A4</td>
      <td style="text-align: center">[7.34, 7.35]</td>
    </tr>
    <tr>
      <td style="text-align: center">A5</td>
      <td style="text-align: center">[7.96, 7.97]</td>
    </tr>
  </tbody>
</table>

<p><code class="language-plaintext highlighter-rouge">sub_grade</code> needs to be removed from our feature set. In a practical application, if we
have access to sub-grade, a simple rule-based model will yield near perfect
predictions as the mapping to interest rate is almost one to one. The decision to 
leave or keep this feature would depend on the model use case in real life. In 
this case study, I exclude it, as a ML model learning a near one-to-one mapping
is wasteful (and frankly boring), and it is much more interesting to try and use the 
rest of the rich feature set to predict interest rates.</p>

<h4 id="a-note-on-application_type">A Note on <code class="language-plaintext highlighter-rouge">application_type</code>
</h4>

<p><img src="../../assets/img/stout/application_type_pie.png" alt="Application Type Pie Char">
85% of applications are individual. This makes sense, as the features 
related to joint applications, <code class="language-plaintext highlighter-rouge">annual_income_joint</code>, <code class="language-plaintext highlighter-rouge">verification_income_joint</code>,
<code class="language-plaintext highlighter-rouge">debt_to_income_joint</code> all had around 85% of their values missing.</p>

<h4 id="identifying-possible-relations">Identifying Possible Relations</h4>

<p><img src="../../assets/img/stout/open_cc_accts.png" alt="Open CC Accounts">
<img src="../../assets/img/stout/debt_limit_relation.png" alt="Debt Limi"></p>

<p>There look to be weak and possibly non-linear relations between both
<code class="language-plaintext highlighter-rouge">num_open_cc_accounts</code> and <code class="language-plaintext highlighter-rouge">total_debt_limit</code> and <code class="language-plaintext highlighter-rouge">interest_rate</code>.</p>

<h3 id="preprocessing">Preprocessing</h3>

<p>Preprocessing of the overall dataset consisted of the following:</p>
<ul>
  <li>Deletion of bloated/useless features
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">emp_title</code>: there are apx. 4500 of these titles. Not very insightful w/o further processing</li>
      <li>
<code class="language-plaintext highlighter-rouge">state</code>: see EDA</li>
    </ul>
  </li>
  <li>Deletion of grade-related features
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">grade</code> and <code class="language-plaintext highlighter-rouge">sub_grade</code>: see EDA</li>
    </ul>
  </li>
  <li>One-hot Encoding of Categorical Features
    <ul>
      <li>Allows model to work with non-numerical data</li>
    </ul>
  </li>
  <li>Train/Test Split
    <ul>
      <li>20% of the data used as a validation set</li>
      <li>Given more time, would evaluate models using cross-validation</li>
    </ul>
  </li>
</ul>

<p>These pre-processing steps were performed for both the train set, and test set, but
separately as to not introduce unintended biases to the model:</p>

<ul>
  <li>Null Value Replacement
    <ul>
      <li>For values in the columns <code class="language-plaintext highlighter-rouge">{'emp_length', 'debt_to_income', 'annual_income_joint', 'debt_to_income_joint'}</code>, null values were replaced with the feature mean</li>
      <li>For values in the columns <code class="language-plaintext highlighter-rouge">{'months_since_last_delinq', 'months_since_90d_late', 'months_since_last_credit_inquiry'}</code> these were filled with a number of months equivalent to 150 years, much longer than a normal human lifespan</li>
      <li>All other values were filled with 0</li>
    </ul>
  </li>
  <li>Standardization
    <ul>
      <li>Training sets were standardized</li>
    </ul>
  </li>
</ul>

<h3 id="interest-rate-prediction-as-a-classification-problem">Interest Rate Prediction as a Classification Problem</h3>
<p>Initially, I approached this a classfication problem with discrete interest rates as classes. The below table shows results on the validation set (0-1 Loss). Evidently, this approach was a spectacular failure.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Model</th>
      <th style="text-align: center">Validation Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">SVC</td>
      <td style="text-align: center">11.70%</td>
    </tr>
    <tr>
      <td style="text-align: center">KNN(k=3)</td>
      <td style="text-align: center">5.75%</td>
    </tr>
    <tr>
      <td style="text-align: center">NN</td>
      <td style="text-align: center">4.05%</td>
    </tr>
  </tbody>
</table>

<p><em>Neural net used linear layers with ReLU activation functions.</em></p>

<h3 id="interest-rate-prediction-as-a-regression-problem">Interest Rate Prediction as a Regression Problem</h3>

<p><img src="../../assets/img/stout/training_loss_normal.png" alt="Training Loss Graph"></p>

<p>I then approached the problem as a regression. This proved more fruitful. I only had
the time to run one approach, a NN, which resulted in a RMSE on the validation set of 
2.97 percentage points. With more time I would run more regression models to try and find a better solution. The RMSE while training is shown above.</p>

<h4 id="including-sub_grade-and-grade">Including <code class="language-plaintext highlighter-rouge">sub_grade</code> and <code class="language-plaintext highlighter-rouge">grade</code>
</h4>

<p><img src="../../assets/img/stout/training_loss_oneone.png" alt="Training Loss Graph"></p>

<p>To show the near-direct relation between <code class="language-plaintext highlighter-rouge">sub_grade</code> and <code class="language-plaintext highlighter-rouge">grade</code> with interest rate, I
ran the NN including these features. As expected,  including <code class="language-plaintext highlighter-rouge">sub_grade</code> and <code class="language-plaintext highlighter-rouge">grade</code> greatly improved model RMSE, 
resulting in a validation RMSE of 0.407 percentage points. The RMSE while training is shown above.</p>

<h3 id="assumptions-made">Assumptions Made</h3>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">sub_grade</code> and <code class="language-plaintext highlighter-rouge">grade</code> should not be used in interest rate prediction</li>
  <li>All features required to accurately predict interest rate are 
contained within the dataset</li>
  <li>The treatment of null-values as described in the pre-processing section results in good model performance. This is something else I would experiment with given time</li>
</ul>

<h2 id="case-study-2"><strong>Case Study 2</strong></h2>
<p>This case study involved the calculation of several statistics on order data from
customers.</p>

<h3 id="total-revenue">Total Revenue</h3>

<p><img src="../../assets/img/stout/total_rev.png" alt="Total Revenue Plot">
Total revenue dipped in 2016 before rebounding in 2017.</p>

<h3 id="new--existing-customer-revenue-statistics">New &amp; Existing Customer Revenue Statistics</h3>

<p><img src="../../assets/img/stout/customer_revenue_split.png" alt="Customer Revenue Breakdown">
For 2016 and 2017 (the years where we can tell which customers are new), we see that
the majority of revenue comes from new customers, rather than from existing customers. Depending on the industry, this data may either be expected or alarming.</p>

<h3 id="new--existing-customer-count-statistics">New &amp; Existing Customer Count Statistics</h3>

<p><img src="../../assets/img/stout/customer_count_breakdown.png" alt="Customer Count Breakdown">
We see a similar result to that of revenue. This store or business has performs poorly
when it comes to customer retention.</p>

<h3 id="revenue-lost-to-customer-attrition">Revenue Lost to Customer Attrition</h3>

<p>Between 2016 and 2017, this store or business lost $4.844M in revenue due to customer attrition. Cannot calculate this statistic for 2015-2016, as it cannot be split into
new and existing customers.</p>

  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    Â© Copyright 2021 Martin  Michalski.
    Powered by <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a>.

    
    
  </div>
</footer>



  </body>

  <!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>

  
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  





</html>
